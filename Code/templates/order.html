<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <style>
         @import url("https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap");
         body {
         font-family: 'Roboto', sans-serif;
         }
         form {
            padding-left: 30px;
         }
         .topnav {
         background-color: #333;
         overflow: hidden;
         }
         /* Style the links inside the navigation bar */
         .topnav a {
         float: left;
         color: #f2f2f2;
         text-align: center;
         padding: 14px 16px;
         text-decoration: none;
         font-size: 17px;
         }
         /* Change the color of links on hover */
         .topnav a:hover {
         background-color: #ddd;
         color: black;
         }
         /* Add a color to the active/current link */
         .topnav a.active {
         background-color: #04AA6D;
         color: white;
         }
         .user-info {
            margin: 20px;
         }
        .user-info h2 {
            margin-bottom: 10px;
         }
        .user-info p {
            margin: 5px 0;
         }
         body {
                font-family: 'Roboto', sans-serif;
         }
         .menu {
               width: 55%;
               flex-direction: column;
               align-items: flex-start;
               padding: 40px;
               background-color: #f1f1f1;
               align-content: baseline;
         }
         .ordering { /*ordering is the order list on the right, the container where the ordered items ares */
               width: 40%;
               flex-direction: column;
               align-items: flex-start;
               padding: 40px;
               background-color: #f1f1f1;
               align-content: baseline;
         }
         .tabs{
            display:flex;
         }
         .order-item{
               display: flex;
               flex-direction: row;
               align-items: center;
               padding: 20px;
               margin:20px;
               background-color: grey;
               border-radius: 10px;
               justify-content: space-between;
               cursor: pointer;
         }
         .order-item:hover{
            background-color: #999999;
            box-shadow: 5px 5px 10px;
         }
         .image{
               height: 100px;
               width: 100px;
               overflow: hidden;
         }
         .ordered-item { /*After the item was ordered, it appears on the right */
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            margin: 10px;
            background-color: #ddd;
            border-radius: 5px;
            border: 2px solid black;
         }
         .delete_button{ /* The button to delete items from the order list */
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            width: 30px; /* Adjusted size to better fit the icon */
            height: 30px; /* Adjusted size to better fit the icon */
            border: none;
            cursor: pointer;
            background-color: transparent; /* Ensure no background color */
            background-image: url('https://img.icons8.com/?size=100&id=nerFBdXcYDve&format=png&color=ff0000'); /* Make sure this URL is correct and accessible */
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            transition: transform 0.3s;
         }
         .delete_button:hover {
            transform: scale(1.1); /* Slightly increase size on hover */
         }       

         .submit-button { /*self explanatory, when clicked, will delete all the items in the 'ordered' container */
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #04AA6D;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
         }
         .submit-button:hover {
            background-color: #038a5f;
         }
      </style>
   </head>
   <body>

      <div class="topnav">
         <a class="active" href="/">Home</a>
         <a href="/signup">Sign up</a>
         <a href="/signin">Sign in</a>
         <a href="/chat">Chat</a>
         <a href="/order">Order</a>
         <a href="/account">Account</a>
      </div>
      <h1 class="text">Ordering page</h1>
      <div class="user-info">
         {% with messages = get_flashed_messages() %}
         {% if messages %}

             {% for message in messages %}
                 <p class="flash">{{ message }}</li>
             {% endfor %}

         {% endif %}
         {% endwith %}
     </div>

    <div class="tabs">
        <div class="menu">
            <div class="order-item" id="1" data-name="Chicken rice" data-price="12.50">
                <img src="{{ url_for('static', filename='images/chicken rice.jpg') }}" class="image">
                <h3>Chicken rice</h3>
                <h3>Price: $12.50</h3>
            </div>
            <div class="order-item" id="2" data-name="Avocado toast" data-price="7.50">
                <img src="{{ url_for('static', filename='images/avocado toast.jpg') }}" class="image">
                <h3>Avocado toast</h3>
                <h3>Price: $7.50</h3>
            </div>
              <div class="order-item" id="3" data-name="Chicken Casear salad" data-price="9.90">
                  <img src="{{ url_for('static', filename='images/chicken casear salad.jpg') }}" class="image">
                  <h3>Chicken Casear salad</h3>
                  <h3>Price: $9.90</h3>
              </div>
              <div class="order-item" id="4" data-name="Kung Pao Chicken" data-price="12.00">
                  <img src="{{ url_for('static', filename='images/chicken.jpg') }}" class="image">
                  <h3>Kung Pao Chicken</h3>
                  <h3>Price: $12.00</h3>
              </div>
              <div class="order-item" id="5" data-name="Pasta Alfredo" data-price="11.75">
                  <img src="{{ url_for('static', filename='images/pasta.jpg') }}" class="image">
                  <h3>Pasta Alfredo</h3>
                  <h3>Price: $11.75</h3>
              </div>
              <div class="order-item" id="6" data-name="Plain rice" data-price="1.50">
                  <img src="{{ url_for('static', filename='images/rice.jpg') }}" class="image">
                  <h3>Plain rice</h3>
                  <h3>Price: $1.50</h3>
              </div>
        </div>
        <div class="ordering">

            <h3>Order list</h3>
            <div id="order-list"></div>
            <form id="order-form" method="POST" action="{{ url_for('submit_order') }}">
                <button type="submit" class="submit-button">Submit Order</button>
            </form>

        </div>
    </div>

    <script>
        // AI did in fact cook
        // Now i know about custom data values
        document.addEventListener('DOMContentLoaded', function() {
            const orderItems = document.querySelectorAll('.order-item');
            const orderList = document.getElementById('order-list');

            orderItems.forEach(item => {
                item.addEventListener('click', function() {
                    const name = item.getAttribute('data-name');
                    const price = item.getAttribute('data-price');

                    const orderListItem = document.createElement('div');
                    orderListItem.classList.add('ordered-item');
                    orderListItem.innerHTML = `
                    <div>
                        <h3>${name}</h3>
                        <h3>Price: $${price}</h3>
                    </div>
                    <div class="delete_button"></div>
                    <input type="hidden" name="order_item" value="${name} - $${price}">
                    `;
                    const deleteButton = orderListItem.querySelector('.delete_button');
                    deleteButton.addEventListener('click', function(event) {
                    event.stopPropagation(); // Prevent the click event from bubbling up to the parent element
                    orderListItem.remove();
                    });


                    orderList.appendChild(orderListItem);
                });
            });
        });
    </script>

   </body>
</html>

